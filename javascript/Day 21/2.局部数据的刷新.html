<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			.piclist{
				width: 1000px;
			}
			.piclist img{
				width:230px;
				height: 300px;
			}
			.piclist li{
				float: left;
				list-style:none;
				margin-right: 10px;
			}
		</style>
	</head>
	<body>
		<div><h1>产品列表</h1></div>
		<div class="piclist"></div>
		<script src="public.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			var oPiclist=document.querySelector('.piclist');
			ajax({
				type:'get',
				url:'data.php',
				success:function(data){
					var arr=JSON.parse(data);
					var html='<ul>';
					for(var i=0;i<arr.length;i++){
						html+='<li><img src="'+arr[i].src+'"><p>'+arr[i].title+'</p></li>';
					}
					html+='</ul>';
					oPiclist.innerHTML=html;
				}
			});
			/*setInterval(function(){
				ajax({
					type:'get',
					url:'data.php',
					success:function(data){
						var arr=JSON.parse(data);
						var html='<ul>';
						for(var i=0;i<arr.length;i++){
							html+='<li><img src="'+arr[i].src+'"><p>'+arr[i].title+'</p></li>';
						}
						html+='</ul>';
						oPiclist.innerHTML=html;
					}
				});
			},1000);*/
			
			
			/*var aImg=document.getElementsByTagName('img');
			alert(aImg.length);//0*/
			//事件委托：给图片添加事件
			/*oPiclist.onclick=function(ev){
				var ev=ev||window.event;
				var ele=ev.target||ev.srcElement;
				if(ele.nodeName=='IMG'){
					alert(ele.src);
				}
			};*/
			var aLi=document.getElementsByTagName('li');
			
			oPiclist.onclick=function(ev){
				var ev=ev||window.event;
				var ele=ev.target||ev.srcElement;
				if(ele.parentNode.nodeName=="LI"){
					alert(ele.parentNode.innerHTML);
				}
			}
			
			
		</script>
	</body>
</html>
